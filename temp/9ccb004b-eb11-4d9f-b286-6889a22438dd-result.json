{"name": "test_instore_bill_add[datainfo1-baseinfo0-caseinfo0]", "status": "broken", "statusDetails": {"message": "AttributeError: 'list' object has no attribute 'keys'", "trace": "self = <testcases.test_ordermanage.TestOrderManage object at 0x0000000003E6FA00>\nbaseinfo = {'base': {'assert_str': 2000000, 'base_url': 'https://api.wy56.com/test/wms-api', 'getcust_url': 'https://api.wy56.com...list', ...}, 'log': {'log_fomat': '[%(asctime)s] %(filename)s->%(funcname)s', 'log_level': 'info', 'log_name': 'log_'}}\ncaseinfo = {'name': '$csv{name}', 'parameters': {'name-login-assert_str': 'test_inorder.csv'}, 'requests': {'data': {'amtInfos': ...': 'post', 'url': '/wms/instore/bill/saveOrUpdate'}, 'validate': {'assert_str': '$csv{assert_str}', 'equals': 2000000}}\ndatainfo = {'amtName': '装卸费', 'assert_str': '2000000', 'id': '', 'inbillCreateTime': '', ...}\nlogin = {'ability': [], 'addTopCompanyAuth': 0, 'authorization': 'eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiIyNiIsImp0aSI6ImUxNWZiYTRjOGE...S10ny2gvPB1-_Bfn-xc', 'avatar': 'https://api.wy56.com/images/2020/04/03/tmb-a8e3255991734992a5be8af7d2d62b8b.jpg', ...}\ngetcustinfo = {'custAddr': '南京路111号', 'custArea': '南京', 'custContactName': '李群', 'custContactPhone': None, ...}\ngetgoodsinfo = [{'custName': '上海通用汽车广州经销商', 'goodsBarcode': None, 'goodsBoxSpecification': None, 'goodsBrandDesc': None, ...}, {'cust....}, {'custName': '上海通用汽车广州经销商', 'goodsBarcode': '', 'goodsBoxSpecification': '订房单', 'goodsBrandDesc': '789', ...}, ...]\n\n    @allure.feature('创建入库单测试')\n    @pytest.mark.parametrize('caseinfo', YamlUtil().read_test_yamlfile('test_instore_bill_add.yaml'))\n    @pytest.mark.parametrize('baseinfo', YamlUtil().read_yamlfile('config.yaml'))\n    @pytest.mark.parametrize('datainfo', DataUtil().csv_read('test_instore_bill_add.csv'))\n    def test_instore_bill_add(self, baseinfo, caseinfo, datainfo,login,getcustinfo,getgoodsinfo):\n        method = caseinfo[\"requests\"][\"method\"]\n        post_type = \"json\"\n        last_url = baseinfo[\"base\"][\"base_url\"] + caseinfo[\"requests\"][\"url\"]\n        log = LogUtil().log_info(datainfo[\"name\"])\n        if datainfo:\n            caseinfo[\"requests\"][\"data\"] = DictUtil().dict_handle_index(caseinfo[\"requests\"][\"data\"], datainfo)\n        else:\n            log.info(\"获取csv用例数据失败\")\n            return\n        if login:\n            caseinfo[\"requests\"][\"data\"][\"inbillOrgId\"] = login[\"orgId\"]\n            caseinfo[\"requests\"][\"data\"][\"inbillCreateUserName\"] = login[\"username\"]\n            caseinfo[\"requests\"][\"data\"][\"inbillCreateUserId\"] = login[\"id\"]\n        else:\n            log.info(\"登录信息异常\")\n            return\n        if getcustinfo:\n            caseinfo[\"requests\"][\"data\"] = DictUtil().dict_handle_index(caseinfo[\"requests\"][\"data\"], getcustinfo)\n            caseinfo[\"requests\"][\"data\"][\"inbillCustomerId\"] = getcustinfo[\"custId\"]\n            caseinfo[\"requests\"][\"data\"][\"inbillCustId\"] = getcustinfo[\"id\"]\n            caseinfo[\"requests\"][\"data\"][\"inbillCustName\"] = getcustinfo[\"custName\"]\n            caseinfo[\"requests\"][\"data\"][\"goodsCustomerId\"] = getcustinfo[\"custId\"]\n        else:\n            log.info(\"获取客户信息失败\")\n            return\n        if getgoodsinfo:\n>           caseinfo[\"requests\"][\"data\"] = DictUtil().dict_handle_index1(caseinfo[\"requests\"][\"data\"], getgoodsinfo)\n\ntestcases\\test_ordermanage.py:47: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <common.dict_util.DictUtil object at 0x000000000494D670>\ndic1 = {'amtInfos': [{'amtName': '装卸费', 'index': '', 'orderAmt': '1', 'orderAmtOrgId': '', ...}], 'goodsCustomerId': 32, 'id': '', 'inbillCreateTime': '', ...}\ndic2 = [{'custName': '上海通用汽车广州经销商', 'goodsBarcode': None, 'goodsBoxSpecification': None, 'goodsBrandDesc': None, ...}, {'cust....}, {'custName': '上海通用汽车广州经销商', 'goodsBarcode': '', 'goodsBoxSpecification': '订房单', 'goodsBrandDesc': '789', ...}, ...]\nindex_num = 0, index_num1 = 0\n\n    def dict_handle_index1(self, dic1, dic2, index_num=0,index_num1=0):\n        for i in dic1.keys():\n            if isinstance(dic1[i], list):\n                for j in dic1[i]:\n                    index_num = dic1[i].index(j)\n                    if isinstance(j, dict):\n                            j = self.dict_handle_index1(j, dic2,index_num,index_num1)\n                    else:\n                        continue\n            elif isinstance(dic1[i], dict):\n                dic1[i] = self.dict_handle_index1(dic1[i], dic2,index_num,index_num1)\n            elif i == \"id\":\n                dic1[i] = \"\"\n                continue\n            else:\n>               for data_key in dic2.keys():\nE               AttributeError: 'list' object has no attribute 'keys'\n\ncommon\\dict_util.py:79: AttributeError"}, "attachments": [{"name": "log", "source": "866f22de-ec7e-4392-8517-0cf08221e8dd-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "datainfo", "value": "{'name': '创建入库单', 'story': '正常下单', 'isConfirmIn': '0', 'isDetail': '0', 'inbillCreateTime': '', 'inbillTime': '', 'inbillType': '2', 'inbillNumber': '', 'inbillOrderNo': '', 'inbillRemark': 'python测试换货入库单', 'id': '', 'show': '', 'index': '', 'inbillInfoFreeze': '2', 'inbillInfoMaterial': '2', 'inbillInfoGoodsCount': '6', 'index1': '1', 'inbillInfoFreeze1': '1', 'inbillInfoMaterial1': '1', 'inbillInfoGoodsCount1': '100', 'orderAmtOrgName': '', 'orderAmtOrgId': '', 'orderAmtPayType': '', 'orderAmtVarifiType': '', 'orderAmtTime': '', 'orderAmtSubmitTime': '', 'orderAmtStatusDesc': '', 'orderAmtTypeId': '158', 'amtName': '装卸费', 'orderAmt': '1', 'assert_str': '2000000'}"}, {"name": "baseinfo", "value": "{'base': {'index_url': 'https://www.wy56.com/test/h5/keyi-wms/', 'base_url': 'https://api.wy56.com/test/wms-api', 'login_url': 'https://api.wy56.com/test/wms-api/system/login', 'getcust_url': 'https://api.wy56.com/test/wms-api/order/customer/downList?custName=', 'getgood_url': 'https://api.wy56.com/test/wms-api/wms/base/goods/list', 'userName': '上海管理', 'password': 123456, 'login_type': 1, 'pre_auth': 'Bearer', 'assert_str': 2000000}, 'log': {'log_name': 'log_', 'log_level': 'info', 'log_fomat': '[%(asctime)s] %(filename)s->%(funcname)s'}}"}, {"name": "caseinfo", "value": "{'name': '$csv{name}', 'parameters': {'name-login-assert_str': 'test_inorder.csv'}, 'requests': {'url': '/wms/instore/bill/saveOrUpdate', 'method': 'post', 'data': {'id': '', 'inbillOrgId': 27, 'isConfirmIn': '0', 'isDetail': '0', 'inbillNumber': '', 'inbillCreateTime': '', 'inbillTime': '', 'inbillType': '1', 'inbillCreateUserId': 26, 'inbillCreateUserName': '上海管理', 'inbillCustId': 87, 'inbillCustomerId': 32, 'inbillOrderNo': '', 'inbillRemark': 'python测试厂家入库单', 'inbillCustName': '上海通用汽车广州经销商', 'goodsCustomerId': 32, 'infos': [{'id': '', 'goodsId': '$csv{goodsId}', 'goodsCustId': '$csv{goodsCustId}', 'goodsCustName': '$csv{goodsCustName}', 'goodsIden': '$csv{goodsIden}', 'goodsCode': '$csv{goodsCode}', 'goodsName': '$csv{goodsName}', 'goodsSpecification': '$csv{goodsSpecification}', 'goodsUnitId': '$csv{goodsUnitId}', 'goodsUnitDesc': '$csv{goodsUnitDesc}', 'goodsBoxSpecification': '$csv{goodsBoxSpecification}', 'goodsManufacturer': '$csv{goodsManufacturer}', 'goodsCategoryId': '$csv{goodsCategoryId}', 'goodsCategoryDesc': '$csv{goodsCategoryDesc}', 'goodsBarcode': '$csv{goodsBarcode}', 'goodsMaxNumber': '$csv{goodsMaxNumber}', 'goodsMinNumber': '$csv{goodsMinNumber}', 'goodsUnitVolume': '$csv{goodsUnitVolume}', 'goodsUnitWeight': '$csv{goodsUnitWeight}', 'goodsTrayArea': '$csv{goodsTrayArea}', 'goodsSingleTrayMaxStart': '$csv{goodsSingleTrayMaxStart}', 'goodsSingleTrayMaxEnd': '$csv{goodsSingleTrayMaxEnd}', 'goodsHalfTrayMaxStart': '$csv{goodsHalfTrayMaxStart}', 'goodsHalfTrayMaxEnd': '$csv{goodsHalfTrayMaxEnd}', 'goodsEnable': '$csv{goodsEnable}', 'goodsEnableDesc': '$csv{goodsEnableDesc}', 'goodsExtendCode': '$csv{goodsExtendCode}', 'goodsOriginPlace': '$csv{goodsOriginPlace}', 'goodsSuite': '$csv{goodsSuite}', 'goodsSuiteDesc': '$csv{goodsSuiteDesc}', 'goodsFrom': '$csv{goodsFrom}', 'goodsFromDesc': '$csv{goodsFromDesc}', 'goodsRemarks': '$csv{goodsRemarks}', 'goodsCreateTime': '$csv{goodsCreateTime}', 'goodsBrandId': '$csv{goodsBrandId}', 'goodsBrandDesc': '$csv{goodsBrandDesc}', 'goodsExpireDate': '$csv{goodsExpireDate}', 'custName': '上海通用汽车广州经销商', 'goodsSingleTrayDesc': '$csv{goodsSingleTrayDesc}', 'goodsHalfTrayMaxDesc': '$csv{goodsHalfTrayMaxDesc}', 'show': '', 'index': '', 'inbillInfoFreeze': '1', 'inbillInfoMaterial': '1', 'inbillInfoGoodsId': '$csv{inbillInfoGoodsId}', 'inbillInfoReceiptUserId': '$csv{inbillInfoReceiptUserId}', 'inbillInfoReceiptUserName': '$csv{inbillInfoReceiptUserName}', 'inbillInfoGoodsCount': '5'}, {'id': '', 'goodsId': '$csv{goodsId}', 'goodsCustId': '$csv{goodsCustId}', 'goodsCustName': '$csv{goodsCustName}', 'goodsIden': '$csv{goodsIden}', 'goodsCode': '$csv{goodsCode}', 'goodsName': '$csv{goodsName}', 'goodsSpecification': '$csv{goodsSpecification}', 'goodsUnitId': '$csv{goodsUnitId}', 'goodsUnitDesc': '$csv{goodsUnitDesc}', 'goodsBoxSpecification': '$csv{goodsBoxSpecification}', 'goodsManufacturer': '$csv{goodsManufacturer}', 'goodsCategoryId': '$csv{goodsCategoryId}', 'goodsCategoryDesc': '$csv{goodsCategoryDesc}', 'goodsBarcode': '$csv{goodsBarcode}', 'goodsMaxNumber': '$csv{goodsMaxNumber}', 'goodsMinNumber': '$csv{goodsMinNumber}', 'goodsUnitVolume': '$csv{goodsUnitVolume}', 'goodsUnitWeight': '$csv{goodsUnitWeight}', 'goodsTrayArea': '$csv{goodsTrayArea}', 'goodsSingleTrayMaxStart': '$csv{goodsSingleTrayMaxStart}', 'goodsSingleTrayMaxEnd': '$csv{goodsSingleTrayMaxEnd}', 'goodsHalfTrayMaxStart': '$csv{goodsHalfTrayMaxStart}', 'goodsHalfTrayMaxEnd': '$csv{goodsHalfTrayMaxEnd}', 'goodsEnable': '$csv{goodsEnable}', 'goodsEnableDesc': '$csv{goodsEnableDesc}', 'goodsExtendCode': '$csv{goodsExtendCode}', 'goodsOriginPlace': '$csv{goodsOriginPlace}', 'goodsSuite': '$csv{goodsSuite}', 'goodsSuiteDesc': '$csv{goodsSuiteDesc}', 'goodsFrom': '$csv{goodsFrom}', 'goodsFromDesc': '$csv{goodsFromDesc}', 'goodsRemarks': '$csv{goodsRemarks}', 'goodsCreateTime': '$csv{goodsCreateTime}', 'goodsBrandId': '$csv{goodsBrandId}', 'goodsBrandDesc': '$csv{goodsBrandDesc}', 'goodsExpireDate': '$csv{goodsExpireDate}', 'custName': '$csv{custName}', 'goodsSingleTrayDesc': '$csv{goodsSingleTrayDesc}', 'goodsHalfTrayMaxDesc': '$csv{goodsHalfTrayMaxDesc}', 'show': '$csv{show}', 'index': '1', 'inbillInfoFreeze': '2', 'inbillInfoMaterial': '2', 'inbillInfoGoodsId': '$csv{inbillInfoGoodsId}', 'inbillInfoReceiptUserId': '$csv{inbillInfoReceiptUserId}', 'inbillInfoReceiptUserName': '$csv{inbillInfoReceiptUserName}', 'inbillInfoGoodsCount': '9'}], 'amtInfos': [{'orderAmtOrgName': '', 'orderAmtOrgId': '', 'orderAmtPayType': '', 'orderAmtVarifiType': '', 'orderAmtTime': '', 'orderAmtSubmitTime': '', 'orderAmtStatusDesc': '', 'show': '', 'index': '', 'orderAmtTypeId': '158', 'amtName': '装卸费', 'orderAmt': '1'}]}}, 'validate': {'equals': 2000000, 'assert_str': '$csv{assert_str}'}}"}], "start": 1646879495588, "stop": 1646879495594, "uuid": "da761d68-2a7f-4816-a735-1c319a59ce8a", "historyId": "c4b60d9964a89a56965ead3a60cf64db", "testCaseId": "2c2f67bd53b78ebb2c01e1a48f0fb1d5", "fullName": "testcases.test_ordermanage.TestOrderManage#test_instore_bill_add", "labels": [{"name": "feature", "value": "创建入库单测试"}, {"name": "parentSuite", "value": "testcases"}, {"name": "suite", "value": "test_ordermanage"}, {"name": "subSuite", "value": "TestOrderManage"}, {"name": "host", "value": "HXPSPQYBEZK8JRT"}, {"name": "thread", "value": "81292-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "testcases.test_ordermanage"}]}